/*! akAjaxService v1.0.1 2020-01-23 | https://github.com/akwebapps/ak-AjaxService | (c) 2020 AK Web Apps | @license Licensed MIT */
!function(e){var n={type:"POST",async:!0,cache:!1,consoleLogs:!0,primaryKey:"w",logPrefix:"akAjax:"};e.akAjaxService=function(t,o,s,a){function r(e){var n=e;if("string"==typeof n)try{var t=JSON.parse(n);t&&"object"==typeof t&&(n=t)}catch(e){}return n}function i(e,n,t){e.consoleLogs&&console.log({status:"<"+e.logPrefix+" Success",endpoint:n.endpoint,key:n.key,returned:t})}o&&"string"==typeof o&&o.indexOf("{")<0&&(o=JSON.parse('{"'+decodeURI(o).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'));var g=e.extend(!0,{},n,a),c={action:">"+g.logPrefix+" Send",endpoint:t,key:g.primaryKey&&o[g.primaryKey]?o[g.primaryKey]:"",data:o},p={url:t,data:o,success:function(e){e=r(e),i(g,c,e),"function"==typeof s&&s(e)},error:function(n,t,a,p){200==n.status?(o=r(n.responseText),i(g,c,o),"function"==typeof s&&s(o)):function(n,t,o){var s=o;o.status&&(s=o.status+"  "+o.statusText),o.responseText&&(pageMsg=o.responseText,findComment=pageMsg.indexOf("\x3c!-- ERROR MSG --\x3e"),findComment>=0&&(pageMsg=pageMsg.substring(findComment),findComment=pageMsg.indexOf("\x3c!-- END MSG --\x3e"),findComment>=0&&(pageMsg=pageMsg.substring(0,findComment-1))),pageMsg=pageMsg.replace(/<(?:.|\n)*?>/gm,""),s+="\n"+pageMsg);var a={status:"<"+n.logPrefix+" Failed",endpoint:t.endpoint};throw n.consoleLogs&&e.extend(a,{data:t.data,returned:s}),a}(g,c,n)}};g.consoleLogs&&console.log(c),e.ajax(e.extend(p,g))}}(jQuery);